# Introduction

MNISTæ‰‹å†™æ•°å­—æ•°æ®é›†æ˜¯ä¸€ä¸ªå…¸å‹çš„å›¾åƒåˆ†ç±»é—®é¢˜çš„Benchmarkï¼Œå…¶è·å–å’Œåˆ©ç”¨ä¸Šçš„ä¾¿åˆ©æ€§ä½¿å¾—å®ƒåœ¨ä¸–ç•ŒèŒƒå›´å†…çš„å¹¿æ³›ä¼ æ’­ï¼Œè¢«è®¸å¤šç ”ç©¶è€…æ‰€ä½¿ç”¨çš„ã€‚æ•´ä¸ªMNISTæ•°æ®é›†ç›¸å¯¹æ¯”è¾ƒå°ï¼ˆä¸å…¶ä»–çš„benchmarking datasetsç›¸æ¯”ï¼‰ï¼Œå¹¶ä¸”ä»¥éå¸¸ç›´æ¥çš„æ–¹å¼ç¼–ç å’Œä¿å­˜ï¼šæ•´ä¸ªç¼–ç è¿‡ç¨‹ä¸­æ²¡æœ‰åˆ©ç”¨å¤æ‚çš„å­˜å‚¨ç»“æ„ï¼ˆstorage structuresï¼‰ï¼Œå‹ç¼©æ–¹å¼ï¼ˆcompressionï¼‰æˆ–è€…ä¸“æœ‰çš„æ•°æ®æ ¼å¼ï¼ˆproprietary data formatsï¼‰ã€‚å› æ­¤ï¼Œä½¿ç”¨ä»»ä½•å¹³å°æˆ–è€…ç¼–ç¨‹è¯­è¨€éƒ½å¯ä»¥å¾ˆè½»æ¾åœ°ä½¿ç”¨è¿™äº›æ•°æ®ã€‚ä½†å¦ä¸€æ–¹é¢ï¼Œéšç€æ·±åº¦ç¥ç»ç½‘ç»œæŠ€æœ¯ï¼ˆå°¤å…¶æ˜¯å·ç§¯ç¥ç»ç½‘ç»œï¼‰çš„å‘å±•ï¼Œè®¸å¤šç¥ç»ç½‘ç»œç»“æ„éƒ½èƒ½å¤Ÿåœ¨MNISTæ•°æ®é›†ä¸Šå–å¾—ç›¸å½“é«˜çš„åˆ†ç±»è¡¨ç°ï¼›MNISTæ•°æ®é›†å¯¹äºå¤æ‚åˆ†ç±»ä»»åŠ¡çš„ä»£è¡¨æ€§æ˜¯æœ‰é™çš„ã€‚å®é™…ä¸Šï¼ŒMNISTæ•°æ®é›†æ˜¯NIST Special Database 19æ•°æ®é›†ï¼ˆå…¶ä¸­NISTæ˜¯National Institute of Standards and Technologyï¼Œå³â€œç¾å›½å›½å®¶æŠ€æœ¯æ ‡å‡†æŠ€æœ¯ç ”ç©¶æ‰€â€çš„ç¼©å†™ï¼‰çš„å­é›†ï¼Œåè€…ä¸ä»…åŒ…å«æ‰‹å†™æ•°å­—å›¾åƒï¼Œè¿˜åŒ…å«å¤§é‡çš„å¤§å†™å­—æ¯å’Œå°å†™å­—æ¯ï¼Œå¯¹åº”ç€æ›´å¤æ‚çš„æ•°æ®åˆ†ç±»é—®é¢˜ã€‚ä½†æ˜¯ï¼Œä¸MNISTæ•°æ®é›†ç›¸æ¯”ï¼ŒNISTæ•°æ®é›†å¾ˆéš¾è·å–å’Œä½¿ç”¨ã€‚

å› æ­¤ï¼Œåœ¨2017å¹´ï¼ŒCohenç­‰äºº [1] å‚è€ƒæ„å»ºMNISTæ•°æ®é›†çš„æ–¹å¼ï¼Œå¯¹NIST Special Database 19é‡æ–°è¿›è¡Œäº†æ¢³ç†ï¼Œå°†å›¾åƒæ•°æ®è½¬æ¢ä¸ºä¸MNISTæ•°æ®é›†ä¸€è‡´çš„æ ¼å¼ï¼Œå¹¶å°†å…¶å‘½åä¸ºExtended MNISTï¼ˆEMNISTï¼‰ï¼ˆavailable at: [https://www.westernsydney.edu.au/icns/resources/reproducible_research3/publication_support_materials2/emnist](https://www.westernsydney.edu.au/icns/resources/reproducible_research3/publication_support_materials2/emnist)ï¼‰ï¼Œå¹¶ä½¿ç”¨ELM-basedï¼ˆExtreme Learning Machineï¼Œæé™å­¦ä¹ æœºï¼‰neural networkä¸ºEMNISTæ•°æ®é›†æä¾›äº†åŸºå‡†çš„åˆ†ç±»å‡†ç¡®ç‡ã€‚æœ¬åšå®¢å°±ä¸»è¦å¯¹è®ºæ–‡ [1]  è¿›è¡Œå­¦ä¹ ï¼Œå¹¶å¯¹Cohenç­‰äººæä¾›çš„EMNISTæ•°æ®é›†è¿›è¡Œåˆæ­¥çš„æ•´ç†å’Œåˆ†æã€‚

<br>

# NIST Special Database 19, EMNIST

## MNIST Database and NIST Special Database 19

MNISTæ•°æ®é›†äº1998å¹´ç”±LeCun [2] ç­‰äººé¦–æ¬¡å¼•å…¥ï¼Œå®ƒæºè‡ªäºä¸€ä¸ªæ›´å¤§çš„æ•°æ®é›†ï¼Œå³NIST Special Database 19 [3]ï¼Œæ˜¯åè€…çš„ä¸€ä¸ªå­é›†ã€‚å…·ä½“è€Œè¨€ï¼ŒMNISTæºè‡ªäºNIST Special Database 1å’ŒNIST Special Database 3çš„ä¸€å°éƒ¨åˆ†æ•°å­—å›¾åƒï¼ˆå›¾åƒå¤„ç†æ–¹å¼è§å‚è€ƒ==[XX]==ï¼‰ã€‚NIST Special Database 19æ˜¯é‚£ä¸€ç³»åˆ—æ‰‹å†™å­—ç¬¦æ•°æ®é›†çš„æœ€ç»ˆç‰ˆæœ¬ï¼Œæœ¬èº«åŒ…å«å¹¶å–ä»£äº†è®¸å¤šå…ˆå‰å‘å¸ƒçš„æ‰‹å†™æ•°æ®é›†ï¼Œä¾‹å¦‚Special 1,3,7ï¼Œå…±åŒ…å«è¶…è¿‡500åä¹¦å†™è€…æ‰€ä¹¦å†™çš„æ‰‹å†™æ•°å­—ï¼ˆdigits or numeralsï¼‰ã€å¤§å†™å­—æ¯ï¼ˆuppercaseï¼‰å’Œå°å†™å­—æ¯ï¼ˆlowercaseï¼‰ã€‚NIST Special Database 19ä»£è¡¨ç€ä¸€ä¸ªæ›´å¤§çš„æ›´å¤æ‚çš„åˆ†ç±»ä»»åŠ¡ï¼Œä»¥åŠå¢åŠ æ›´å¤æ‚ä»»åŠ¡çš„å¯èƒ½æ€§ï¼Œä¾‹å¦‚é€šè¿‡å•è¯è§£é‡Šï¼ˆwords interpretationsï¼‰è¿›è¡Œè¯­ä¹‰è§£é‡Šï¼ˆsemantic interpretationsï¼‰ã€‚å®Œæ•´çš„NIST Special Database 19äº1995å¹´é¦–æ¬¡å‘è¡¨ [3]ï¼Œå¹¶äº2016å¹´ä»¥ä¸€ç§ç°ä»£çš„æ ¼å¼é‡æ–°å‘å¸ƒ [4]ã€‚

æ³¨ï¼šNISTæ•°æ®é›†çš„ä½œè€…å’Œæ”¶é›†è€…ä¹Ÿå»ºè®®ä¸“é—¨ä½¿ç”¨Special Database 7ï¼ˆåŒæ ·åŒ…å«åœ¨NIST Special Database 19ï¼‰ä¸­çš„æ•°æ®ä½œä¸ºæµ‹è¯•æ•°æ®ï¼Œå› ä¸ºè¿™äº›æ ·æœ¬æ”¶é›†è‡ªé«˜ä¸­ç”Ÿï¼Œè¿™å¸¦æ¥äº†ä¸€ä¸ªæ›´å…·æŒ‘æˆ˜æ€§çš„é—®é¢˜ï¼ˆ...as the samples were collected from high school students pose a more challenging problemï¼‰ã€‚
{: .notice--primary}

![image-20230327143030565](https://blogimages-1309804558.cos.ap-nanjing.myqcloud.com/DeLLLaptop/image-20230327143030565.png)

NISTæ•°æ®é›†ä¸€å…±åŒ…å«814,255å¼ å›¾åƒï¼Œæ—¨åœ¨æä¾›å¤šç§å…‰å­¦å­—ç¬¦è¯†åˆ«ä»»åŠ¡ï¼ˆmultiple optical character recognition tasksï¼‰ï¼Œå› æ­¤å°†å­—ç¬¦æ•°æ®å‘ˆç°åœ¨äº”ä¸ªç‹¬ç«‹çš„æ•°æ®å±‚æ¬¡ä¸­ï¼ˆfive separate data hierarchiesï¼‰ï¼š

- **By_Page**ï¼šåœ¨æ”¶é›†æ•°æ®æ—¶ï¼Œä¹¦å†™è€…è¢«è¦æ±‚å¡«ä¸€å¼ æ ‡å‡†è¡¨æ ¼ï¼ˆstandard formï¼‰ï¼Œä¸€å…±æ”¶é›†åˆ°3699ä»½å®Œæ•´çš„è¡¨æ ¼ï¼Œè¿™äº›è¡¨æ ¼å°±åŒ…å«äº†æ•°æ®çš„æ¥æºã€‚By_Pageæ•°æ®å±‚æ¬¡ä¸­çš„æ•°æ®å°±æ˜¯è¿™äº›è¡¨æ ¼çš„æœªå¤„ç†çš„äºŒè¿›åˆ¶å›¾åƒï¼ˆunprocessed binary imagesï¼‰ã€‚
- **By_Author**ï¼šåœ¨è¿™ä¸ªæ•°æ®å±‚æ¬¡ä¸­ï¼Œä»ä¹¦å†™è€…å¡«å†™çš„è¡¨æ ¼ä¸­æå–å‡ºä¸åŒçš„å­—ç¬¦ï¼Œå¹¶ä¸”æŒ‰ç…§ä¸åŒçš„ä¹¦å†™è€…æ‰“ä¸Šæ ‡ç­¾ã€‚è¿™ä¸ªæ•°æ®å±‚æ¬¡çš„æ•°æ®ä¸åˆ©äºåˆ†ç±»ä»»åŠ¡ï¼Œå› ä¸ºæ¯ä¸ªåˆ†ç»„ä¸­åŒ…å«ç€ä¸åŒçš„å­—ç¬¦ã€‚ï¼ˆThis hierarchy contains the segmented character classes organized by writer. It allows for such tasks as writer identification but offers little in the way of classification benefit as each grouping contains digits from multiple classes.ï¼‰
- **By_Filed**ï¼šåœ¨è¿™ä¸ªæ•°æ®å±‚æ¬¡ä¸­ï¼Œæ•°æ®ï¼ˆåŒ…æ‹¬æ•°å­—å’Œå­—æ¯ï¼‰ä»¥å­—æ®µæ¥åˆ†ç±»ã€‚ï¼ˆThis organization contains the digits and character sorted by the field on the collection field in which they appear. This is primarily useful for segmenting digits as they appear in their own isolated fields.ï¼‰
- **By_Class**ï¼šä»åˆ†ç±»è§’åº¦è®²ï¼Œè¿™ä¸ªæ•°æ®å±‚æ¬¡æ˜¯æœ€æœ‰ç”¨çš„ç»„ç»‡å±‚æ¬¡ã€‚å…¶ä¸­çš„æ•°æ®æŒ‰ç…§[0-9]ï¼Œ[a-z]ï¼Œå’Œ[A-Z]åˆ†ä¸º62ä¸ªç±»ï¼Œå¹¶ä¸”è¢«åˆ†å‰²ä¸ºæ•°æ®é›†å’Œæµ‹è¯•é›†ï¼›
- **By_Merge**ï¼šè¿™ä¸ªæ•°æ®å±‚æ¬¡è§£å†³äº†åœ¨æ‰‹å†™æ•°å­—åˆ†ç±»é¢†åŸŸçš„ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜ï¼Œå³æŸäº›å¤§å†™å­—æ¯å’Œå°å†™å­—æ¯ä¹‹é—´çš„ç›¸ä¼¼æ€§ã€‚ï¼ˆThis data hierarchy addresses an interesting problem in the classification of handwritten digits, which is the similarity between certain uppercase and lowercase letters.ï¼‰åœ¨ä¾æ®å®Œæ•´çš„By_Classçš„æ•°æ®å±‚æ¬¡è¿›è¡Œåˆ†ç±»æ—¶ï¼Œç›¸ä¼¼æ€§çš„å½±å“æ‰€å¯¼è‡´çš„è¯†åˆ«é”™è¯¯é—®é¢˜åœ¨æ··æ·†çŸ©é˜µä¸­éå¸¸ç›´è§‚ã€‚ï¼ˆ**These effects are often plainly visible when examining the confusion matrix resulting from the full classification task on the By Class dataset.**ï¼‰æ•°æ®é›†ä¸Šçš„è¿™ä¸ªå˜ä½“åˆå¹¶äº†æŸäº›ç±»ï¼Œåˆ›å»ºäº†ä¸€ä¸ª47ç±»çš„åˆ†ç±»ä»»åŠ¡ã€‚ï¼ˆThis variant on the dataset merges certain classes, creating a 47-class classification task.ï¼‰åˆå¹¶çš„ç±»åŒ…æ‹¬ï¼šCï¼ŒIï¼ŒJï¼ŒKï¼ŒLï¼ŒMï¼ŒOï¼ŒPï¼ŒSï¼ŒUï¼ŒVï¼ŒWï¼ŒXï¼ŒYå’ŒZå…±15ä¸ªå­—æ¯ã€‚

è®ºæ–‡ [1] æ‰€ç»™å‡ºçš„è½¬æ¢è¿‡ç¨‹å’Œæ‰€æä¾›çš„ä»£ç é€‚ç”¨äºæ‰€æœ‰çš„æ•°æ®å±‚æ¬¡ï¼Œé™¤äº†By_Pageçš„æ•°æ®å±‚æ¬¡ï¼Œå› ä¸ºè¿™ä¸ªæ•°æ®å±‚æ¬¡ä¸­åŒ…å«äº†éå¸¸ä¸åŒçš„å›¾åƒã€‚ç„¶è€Œï¼Œè®ºæ–‡ [1] çš„å·¥ä½œä¸»è¦æ˜¯é’ˆå¯¹By_Classå’ŒBy_Mergeæ•°æ®å±‚æ¬¡ï¼Œå› ä¸ºå®ƒä»¬æ‰€å¯¹åº”çš„åˆ†ç±»ä»»åŠ¡æ˜¯ä¸æ ‡å‡†MNISTæ•°æ®é›†ä¸€è‡´çš„ã€‚

NISTæ•°æ®é›†æœ€åˆä»¥ä¸€ç§éå¸¸é«˜æ•ˆå’Œç´§å‡‘çš„æ–¹å¼ä¿å­˜ï¼Œå°½ç®¡å®ƒæä¾›äº†è·å–NISTæ•°æ®é›†çš„æºä»£ç ï¼Œä½†æ˜¯åœ¨ç°ä»£è®¡ç®—å¹³å°ä¸Šä½¿ç”¨è¿™äº›æ•°æ®ä»ç„¶æ˜¯ä¸€ä»¶éå¸¸å›°éš¾ã€‚å› æ­¤ï¼ŒNISTæœ€è¿‘å‘å¸ƒäº†NISTæ•°æ®é›†çš„ç¬¬äºŒä¸ªç‰ˆæœ¬ï¼›ç„¶è€Œï¼ŒNISTæ•°æ®é›†ä»ç„¶ä»¥ä¸€ç§åŸå§‹çš„æ–¹å¼è¿›è¡Œç¼–ç ã€‚å› æ­¤ï¼Œè®ºæ–‡ [1] å°±æä¾›äº†ä¸€ç§æ–¹å¼ï¼Œå°†NIST Special Database 19è½¬æ¢ä¸ºä¸MNISTæ•°æ®é›†ä¸€è‡´çš„æ ¼å¼ï¼Œå³æ„å»ºäº†EMNISTæ•°æ®é›†ï¼ˆå³Extended MNIST ï¼‰ã€‚åœ¨ä½¿ç”¨EMNISTæ•°æ®é›†è®­ç»ƒç¥ç»ç½‘ç»œæ—¶ï¼Œç ”ç©¶äººå‘˜ä¸ç”¨è°ƒæ•´åŸæœ¬é€‚ç”¨äºMNISTæ•°æ®é›†çš„ç½‘ç»œç»“æ„ï¼ˆThis is allows the drop-in replacement of the modified NIST datasets without needing to adjust the input layer size or the input rangeï¼‰ã€‚EMNISTæ•°æ®é›†çš„ç›®çš„æ˜¯åœ¨ç°æœ‰çš„åˆ†ç±»ç³»ç»Ÿä¸­æ›¿ä»£MNISTæ•°æ®é›†ã€‚ä¸ºäº†æ›¿ä»£MNISTæ•°æ®é›†ï¼Œé¦–å…ˆéœ€è¦å°†ç›®å…‰èšç„¦åœ¨ç”±NISTæ•°æ®é›†åˆ°MNISTæ•°æ®é›†çš„å¤„ç†æ­¥éª¤ä¸Šï¼ˆthe focus of the methodology is on reproducintg the steps used to convert the NIST dataset into the MNIST datasetï¼‰ï¼Œå¹¶ä¸”å¯¹æ•´ä¸ªNIST Special Database 19æ•°æ®é›†åº”ç”¨åŒæ ·çš„é¢„å¤„ç†æ­¥éª¤ï¼ˆand apply them to the entire NIST Special Database 19ï¼‰ã€‚

<br>

# Conversion Process

NIST Special Database 19æ•°æ®é›†ä½¿ç”¨äº†CCITT Group 4 algorithmè¿›è¡Œå›¾åƒçš„ç¼–ç å’Œå‹ç¼©ï¼Œå¹¶ä¸”ä¿å­˜åœ¨ä¸“æœ‰çš„æ–‡ä»¶æ ¼å¼ä¸­ã€‚NISTäº2016å¹´9æœˆå‘å¸ƒäº†æ•°æ®é›†çš„ç¬¬äºŒä¸ªç‰ˆæœ¬ï¼Œä½¿ç”¨PNGæ–‡ä»¶æ ¼å¼é‡æ–°ç¼–ç äº†ç¬¬ä¸€ç‰ˆçš„æ•°æ®ã€‚

è®ºæ–‡ [1] å°±åŸºäºåŸå§‹æ•°æ®é›†æå–å¹¶è½¬æ¢è¿™äº›æ–‡ä»¶ï¼šä½¿ç”¨é¢„å¤„ç†æŠ€æœ¯ï¼ˆpost-processing techniquesï¼‰å°†NISTæ•°æ®é›†ä¸­çš„128x128åƒç´ çš„äºŒè¿›åˆ¶å›¾åƒï¼ˆ128x128 pixel binary imagesï¼‰è½¬æ¢ä¸º28x28åƒç´ çš„8ä½ç°åº¦å›¾åƒï¼ˆ28x28 pixel 8-bit grayscale imagesï¼‰ï¼Œä»¥åŒ¹é…MNISTæ•°æ®é›†ä¸­çš„æ•°å­—å›¾åƒçš„ç‰¹æ€§ã€‚å…¶æ€è·¯ä¸æ„å»ºMNISTæ•°æ®é›† [2] å¤§ä½“ä¸Šæ˜¯ä¸€è‡´çš„ï¼ˆä½†æ˜¯é‡‡ç”¨ä¸åŒçš„ä¸‹é‡‡æ ·æŠ€æœ¯ä»¥å¤„ç†NISTæ•°æ®é›†ä¸­å­—ç¬¦å½¢çŠ¶å’Œå¤§å°çš„ä¸åŒï¼‰ï¼Œä¸»è¦åŒ…å«å››ä¸ªæ­¥éª¤ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![image-20230328215506844](https://blogimages-1309804558.cos.ap-nanjing.myqcloud.com/imgpersonal/image-20230328215506844.png)

 ï¼ˆ1ï¼‰ä½¿ç”¨é«˜æ–¯æ»¤æ³¢å™¨ï¼ˆ$\sigma=1$ï¼‰æŸ”åŒ–å­—ç¬¦çš„è¾¹ç¼˜ï¼›

ï¼ˆ2ï¼‰æå–ROIï¼ˆRegion of Interestï¼‰ï¼Œä½¿å¾—å­—ç¬¦ä½äºå›¾åƒä¸­å¤®ï¼Œå¹¶ä¸”ä¿æŒçºµæ¨ªæ¯”ï¼ˆaspect ratioï¼‰ ä¸å˜ï¼›

ï¼ˆ3ï¼‰å°†å›¾åƒçš„å·¦å³ä¸¤è¾¹åˆ†åˆ«paddingä¸€ä¸ªåƒç´ ï¼Œé¿å…å­—ç¬¦æ¥è§¦åˆ°å›¾åƒçš„è¾¹ç¼˜ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªæ­£æ–¹å½¢çš„å›¾åƒï¼›

ï¼ˆ4ï¼‰ä½¿ç”¨åŒä¸‰æ¬¡æ’å€¼ç®—æ³•ï¼ˆbi-cubic interpolation algorithmï¼‰å°†å›¾åƒä¸‹é‡‡æ ·è‡³28x28åƒç´ çš„å›¾åƒï¼Œå›¾åƒæ•°æ®çš„å–å€¼èŒƒå›´æ˜¯[0,255]ï¼ˆ8-bit rangeï¼‰ï¼›

<br>

# Classification Methodology

æ–‡ç« é‡‡ç”¨äº†ä¸€ä¸ªç®€å•çš„ä¸‰å±‚çš„æé™å­¦ä¹ æœºç½‘ç»œï¼ˆthree-layer ELM networkï¼‰==[G-B]==ã€‚

è¯¥ç¥ç»ç½‘ç»œä½¿ç”¨ä¸¤ç§ä¸åŒçš„æ–¹å¼è®­ç»ƒã€‚

ç”±äºæ•°æ®é›†çš„å¤§å°ï¼Œä½¿å¾—ELMç¥ç»ç½‘ç»œæ‰€éœ€è¦çš„ä¼ªé€†ä¸èƒ½åœ¨ä¸€ä¸ªstepä¸­è¿›è¡Œè®¡ç®—ï¼ˆThe pseudo-inverse required for the ELM cannot be calculated in a single step due to the size of datasetï¼‰ï¼Œç½‘ç»œä½¿ç”¨Online Pseudo-Inverse Update Modelï¼ˆOPIUMï¼‰[A.Van] è¿›è¡Œè®¡ç®—ã€‚è¯¥æ–¹æ³•è¿­ä»£åœ°è®¡ç®—è¾“å‡ºæƒé‡çš„ç²¾ç¡®ä¼ªé€†ï¼Œä½¿å¾—ç½‘ç»œèƒ½å¤Ÿå¤„ç†å„ç§å¤§å°çš„æ•°æ®é›†ï¼ˆThis method interactively calculates the exact pseudo-inverse solution for the output weights and allows the network to handle datasets of any sizeï¼‰ã€‚

æ‰€ä½¿ç”¨çš„ç¬¬äºŒç§è®­ç»ƒæ–¹æ³•æ˜¯OPIUMæ–¹æ³•çš„å˜ä½“ï¼ˆç§°ä¸ºOPIUMLiteï¼‰ï¼Œå…¶ä¸­å†…éƒ¨äº’ç›¸å…³çŸ©é˜µçš„è®¡ç®—å¯†é›†å‹è®¡ç®—è¢«è¿‘ä¼¼å–ä»£ï¼Œè¿™ä»¥ç²¾åº¦ä¸ºä»£ä»·å¤§å¤§æé«˜äº†ç®—æ³•çš„é€Ÿåº¦ã€‚ï¼ˆThe second training method used is a variant of the OPIUM method (referred as OPIUMLite) in which the computationally intensive calculation of the internal cross-correlation matrix is replaced by an approximation, which greatly improves the speed of the algorithm at the cost of accuracy.ï¼‰





ä¸‹è¡¨å±•ç¤ºäº†EMNISTåœ¨By_Classå’ŒBy_Mergeæ•°æ®å±‚æ¬¡ä¸‹è®­ç»ƒæ•°æ®å’Œæµ‹è¯•æ•°æ®çš„åˆ†å‰²ï¼š

![image-20230328230741920](https://blogimages-1309804558.cos.ap-nanjing.myqcloud.com/imgpersonal/image-20230328230741920.png)

å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ä¸¤ç§ä¸åŒçš„æ•°æ®å±‚æ¬¡ä¸‹ï¼Œéƒ½å…·æœ‰814,255æ¡å›¾åƒæ•°æ®ï¼ˆåŒ…æ‹¬731,668æ¡æµ‹è¯•é›†æ•°æ®å’Œ82,587æ¡æµ‹è¯•æ•°æ®ï¼‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå…¶ä¸­çš„ä¸€åŠçš„æ•°æ®éƒ½æ˜¯digits.



è®­ç»ƒäº†ä¸¤ä¸ªELM-basedç¥ç»ç½‘ç»œï¼›



<br>

# Analysis and Preprocess for EMNIST Database

EMNISTæ•°æ®é›†å…±åŒ…å«å…­ä¸ª`.mat`æ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯ï¼š`emnist-balanced.mat`ï¼Œ`emnist-byclass.mat`ï¼Œ`emnist-bymerge.mat`ï¼Œ`emnist-digits.mat`ï¼Œ`emnist-letters.mat`ï¼Œ`emnist-mnist.mat`ï¼Œæ¯ä¸ªæ–‡ä»¶å­˜å‚¨æ•°æ®çš„æ–¹å¼æ˜¯ç±»ä¼¼çš„ï¼Œä¸‹é¢å°±ä¸»è¦é’ˆå¯¹`emnist-balanced.mat`è¿›è¡Œè¯¦ç»†çš„åˆ†æï¼Œå…¶ä½™çš„`.mat`æ–‡ä»¶å¯ä»¥ç”¨ç±»ä¼¼çš„ä»£ç è¿›è¡Œå¤„ç†ï¼Œ

## `emnist-balanced.mat`

`emnist-balanced.mat`ä¸­åªåŒ…å«ä¸€ä¸ªç»“æ„ä½“`dataset`ï¼š

```matlab
>> load emnist-balanced.mat
>> whos
  Name         Size                Bytes  Class     Attributes
  dataset      1x1             105282264  struct              
```

è¯¥ç»“æ„ä½“ä¸­æœ‰ä¸‰ä¸ªfieldï¼š

```matlab
>> dataset
dataset = 
  struct with fields:
      train: [1Ã—1 struct]
       test: [1Ã—1 struct]
    mapping: [47Ã—2 double]
```

`dataset.train`å’Œ`dataset.test`ç»“æ„ä½“ä¸­åˆ†åˆ«ä¿å­˜ç€è®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„å›¾åƒæ•°æ®ï¼Œå¯¹åº”çš„æ ‡ç­¾å’Œä¹¦å†™è€…ï¼š

```matlab
>> dataset.train
ans = 
  struct with fields:
     images: [112800Ã—784 uint8]
     labels: [112800Ã—1 double]
    writers: [112800Ã—1 double]
```

```matlab
>> dataset.test
ans = 
  struct with fields:
     images: [18800Ã—784 uint8]
     labels: [18800Ã—1 double]
    writers: [18800Ã—1 double]
```

`dataset.mapping`çŸ©é˜µä¸­åˆ™åŒ…å«ç€æ ‡ç­¾ä¸æŸç±»äº‹ç‰©ï¼ˆä¸å¤ªæ¸…æ¥šæ˜¯ä»€ä¹ˆï¼‰çš„å¯¹åº”å…³ç³»ï¼š

```matlab
>> dataset.mapping
ans =
     0    48
     1    49
     2    50
     ...
    44   113
    45   114
    46   116
```

åœ¨äº†è§£äº†æ•°æ®å­˜å‚¨æ–¹å¼åï¼Œæˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªç®€å•çš„è„šæœ¬å¯¹è¿™äº›æ•°æ®è¿›è¡Œåˆæ­¥çš„åˆ†æå’Œå¤„ç†ï¼Œä¸»è¦åŒ…å«å››ä¸ªæ–¹é¢ï¼š

- å°†å›¾åƒæ•°æ®ä»¥åŠå¯¹åº”çš„æ ‡ç­¾å’Œwriterä¿¡æ¯ä»ç»“æ„ä½“ä¸­å–å‡ºï¼Œåˆ†æç±»åˆ«çš„æ•°é‡ï¼Œä»¥åŠè®­ç»ƒé›†å’Œæµ‹è¯•é›†æ•°æ®ä¸­æ¯ç±»æ ·æœ¬çš„æ•°é‡ï¼›
- å°†å›¾åƒæ•°æ®ä»¥4DçŸ©é˜µï¼ˆSSCBï¼‰çš„å½¢å¼è¿›è¡Œä¿å­˜ï¼Œå°†æ ‡ç­¾è½¬æ¢ä¸º`categorical`ç±»å‹çš„æ•°æ®ï¼Œä½¿å…¶æ›´é€‚ç”¨äºMATLABåˆ†æåŠåç»­çš„ç¥ç»ç½‘ç»œè®­ç»ƒï¼›
- ç”±äºåœ¨åŸå§‹çš„æ•°æ®é›†ä¸­ï¼Œå›¾åƒåªæ˜¯ä»¥æ•°æ®çš„å½¢å¼å‘ˆç°ï¼Œå› æ­¤æˆ‘ä»¬åœ¨è¿™é‡Œå°†å…¶è¾“å‡ºä¸ºå›¾åƒä¿å­˜ï¼Œåˆ†åˆ«ä¿å­˜åœ¨`training`å’Œ`test`æ–‡ä»¶å¤¹ä¸­ï¼ˆä¸åŒç±»åˆ«çš„å›¾åƒä¿å­˜åœ¨ä»¥ç±»åˆ«å‘½åçš„å¯¹åº”å­æ–‡ä»¶å¤¹ä¸­ï¼‰ï¼›
- å°†è®­ç»ƒé›†æ•°æ®å’Œæµ‹è¯•é›†æ•°æ®ä¿å­˜åœ¨`data-balances.mat`æ–‡ä»¶ä¸­ï¼›é™¤æ­¤ä¹‹å¤–ï¼Œåœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œ å¯èƒ½ä¼šç”¨åˆ°äº¤å‰éªŒè¯æ–¹æ³•è°ƒæ•´ç½‘ç»œå‚æ•°ï¼Œå› æ­¤æœ€åå°†è®­ç»ƒæ•°æ®å’Œæµ‹è¯•æ•°æ®æ··åˆåœ¨ä¸€èµ·ï¼Œå¹¶å°†å…¶æ‰€æœ‰çš„ä¿¡æ¯ä¿å­˜åœ¨`data-balances.mat`æ–‡ä»¶ä¸­ï¼Œæ··åˆåçš„æ•°æ®æ‰€å¯¹åº”çš„å›¾åƒä»¥ç±»ä¼¼çš„æ–¹å¼ä¿å­˜åœ¨`merge`æ–‡ä»¶å¤¹ä¸­ï¼›

```matlab
clc,clear,close all

load emnist-balanced.mat

% For mapping
mapping = dataset.mapping;

% For training dataset
training_imgs = dataset.train.images;
training_labels = dataset.train.labels;
training_writers = dataset.train.writers;

% For test dataset
test_imgs = dataset.test.images;
test_labels = dataset.test.labels;
test_writers = dataset.test.writers;

% Number of classes
Classes = unique(training_labels);

% Sample size of each class in training dataset
[ClassVariables,~] = findgroups(training_labels);
training_nums = splitapply(@numel,training_labels,ClassVariables);

% Sample size of each class in test dataset
[ClassVariables,~] = findgroups(test_labels);
test_nums = splitapply(@numel,test_labels,ClassVariables);

% Convert data structures of images and labels
training_imgs = reshape(training_imgs',28,28,1,[]);
training_labels = categorical(training_labels);
test_imgs = reshape(test_imgs',28,28,1,[]);
test_labels = categorical(test_labels);

% Save training images
helperSaveImgs("training",training_imgs,training_labels)

% Save test images
helperSaveImgs("test",test_imgs,test_labels)

% Merge the datasets
imgs = cat(4,training_imgs,test_imgs);
labels = [training_labels;test_labels];
writers = [training_writers;test_writers];

% Save all the data
save("data-balances.mat", ...
    "training_imgs","training_labels","training_writers",...
    "test_imgs","test_labels","test_writers",...
    "imgs","labels","writers","mapping")

% Save all the images
helperSaveImgs("merge",imgs,labels)

function helperSaveImgs(datasetName,imgs,labels)
Classes = unique(labels);
for i = 1:numel(Classes)
    mkdir(datasetName,string(Classes(i)))
    idx = labels==Classes(i);
    imgs_perclass = imgs(:,:,:,idx);
    nums = size(imgs_perclass,4);
    for j = 1:nums
        img = imgs_perclass(:,:,1,j);
        imgname = sprintf("%04d.jpg",j);
        filename = fullfile(pwd,datasetName,string(Classes(i)),imgname);
        imwrite(img,filename)
    end
end
end
```

æœ€åå¯ä»¥å¾—åˆ°ï¼Œè¯¥æ•°æ®æ–‡ä»¶å…±åŒ…å«47ç±»å›¾åƒæ•°æ®ï¼Œè®­ç»ƒé›†ä¸­æ¯ç±»æ ·æœ¬çš„æ•°é‡ä¸º2,400ï¼Œæµ‹è¯•é›†ä¸­æ¯ç±»æ ·æœ¬çš„æ•°é‡ä¸º400ï¼Œè®­ç»ƒé›†ä¸æµ‹è¯•é›†çš„æ¯”ä¾‹å‡ä¸º6ã€‚

å°†æ•°æ®é›†æ··åˆåæ¯ç±»æ ·æœ¬çš„æ•°é‡ä¸º2,800ä¸ªï¼Œä¸€å…±131,600æ¡æ•°æ®ï¼š

```matlab
SampleNums = [training_nums,test_nums];

figure("Units","pixels","Position",[80,454,1746,334])
axes
grid(gca,"on")
box(gca,"on")
hold(gca,"on")

b = bar(Classes,SampleNums);
b(1).FaceColor = [7,84,213]/255;
b(2).FaceColor = [249,82,107]/255;

legend("Training","Test")
set(gca,"FontSize",15)
```

![image-20230330211641575](https://blogimages-1309804558.cos.ap-nanjing.myqcloud.com/DeLLLaptop/image-20230330211641575.png)

<br>

## ğŸ™†â€â™‚ï¸`emnist-byclass.mat`

`emnist-byclass.mat`å…±åŒ…å«62ç±»æ•°æ®ï¼Œæ ‡ç­¾ä¸ç±»åˆ«çš„å¯¹åº”å…³ç³»ï¼š



è®­ç»ƒé›†ä¸­æ¯ç±»æ ·æœ¬çš„æ•°é‡ä¸ºï¼š34585, 38374 (**max**), 34203, 35143, 33535, 31416, 34232, 35754, 33946, 33847, 6407, 3878, 10094, 4562, 4934, 9182, 2517, 3152, 11946, 3762, 2468, 5076, 9002, 8237, 24983, 8347, 2605, 5073, 20764, 9820, 12602, 4637, 4695, 2771, 4743, 2701, 10033, 5159, 2854, 10177, 24631, 2561, 3687, 8738, 2725, 1896 (**min**), 2491, 15318, 2645, 11418, 2749, 2448, 2994, 14105, 2699, 18262, 2830, 2910, 2697, 2822, 2365, 2725ï¼›å…¶ä¸­ï¼Œæ•°å­—å›¾åƒçš„æ ·æœ¬æ€»é‡ä¸ºã€‚ã€‚ã€‚ï¼Œå¤§å†™å­—æ¯å›¾åƒçš„æ ·æœ¬æ€»é‡ä¸ºã€‚ã€‚ï¼Œå°å†™å­—æ¯çš„æ ·æœ¬æ€»é‡ä¸ºï¼›

æµ‹è¯•é›†ä¸­æ¯ç±»æ ·æœ¬çš„æ•°é‡ä¸ºï¼š5778, 6330 (**max**), 5869, 5969, 5619, 5190, 5705, 6139, 5633, 5686, 1062, 648, 1739, 779, 851, 1440, 447, 521, 2048, 626, 382, 810, 1485, 1351, 4156, 1397, 413, 809, 3508, 1576, 2002, 796, 806, 432, 798, 464, 1644, 853, 432, 1683, 4092, 400, 589, 1479, 427, 317 (**min**), 466, 2535, 464, 1898, 466, 368, 505, 2320, 437, 2965, 482, 468, 467, 470, 381, 451ï¼›å…¶ä¸­ï¼Œæ•°å­—å›¾åƒçš„æ ·æœ¬æ€»é‡ä¸ºã€‚ã€‚ã€‚ï¼Œå­—æ¯å›¾åƒçš„æ ·æœ¬æ€»é‡ä¸ºã€‚ã€‚

è®­ç»ƒé›†ä¸æµ‹è¯•é›†æ•°é‡ä¹‹æ¯”åˆ†åˆ«ä¸ºï¼š5.9856, 6.0622, 5.8277, 5.8876, 5.9681, 6.0532, 6.0004, 5.8241, 6.0263, 5.9527, 6.0330, 5.9846, 5.8045, 5.8562, 5.7979, 6.3764, 5.6309, 6.0499, 5.8330, 6.0096, 6.4607, 6.2667, 6.0620, 6.0970, 6.0113, 5.9749, 6.3075, 6.2707, 5.9190, 6.2310, 6.2947, 5.8254, 5.8251, 6.4144, 5.9436, 5.8211, 6.1028, 6.0481, 6.6065, 6.0469, 6.0193, 6.4025, 6.2598, 5.9080, 6.3817, 5.9811, 5.3455, 6.0426, 5.7004, 6.0158, 5.8991, 6.6522, 5.9287, 6.0797, 6.1762, 6.1592, 5.8714, 6.2179, 5.7752, 6.0043, 6.2073, 6.0421.

![image-20230330211751708](https://blogimages-1309804558.cos.ap-nanjing.myqcloud.com/DeLLLaptop/image-20230330211751708.png)

è®­ç»ƒé›†ä¸æµ‹è¯•é›†æ··åˆåï¼Œæ¯ç±»æ ·æœ¬çš„æ•°é‡ä¸ºï¼š40363, 44704 (**max**), 40072, 41112, 39154, 36606, 39937, 41893, 39579, 39533, 7469, 4526, 11833, 5341, 5785, 10622, 2964, 3673, 13994, 4388, 2850, 5886, 10487, 9588, 29139, 9744, 3018, 5882, 24272, 11396, 14604, 5433, 5501, 3203, 5541, 3165, 11677, 6012, 3286, 11860, 28723, 2961, 4276, 10217, 3152, 2213 (**min**), 2957, 17853, 3109, 13316, 3215, 2816, 3499, 16425, 3136, 21227, 3312, 3378, 3164, 3292, 2746, 3176ï¼›å…¶ä¸­ï¼Œæ•°å­—å›¾åƒçš„æ ·æœ¬æ€»é‡ä¸ºã€‚ã€‚ã€‚ï¼Œå­—æ¯å›¾åƒçš„æ ·æœ¬æ€»é‡ä¸ºã€‚ã€‚



ä¸€å…±814,255æ¡å›¾åƒæ•°æ®ã€‚

## ğŸ™†â€â™‚ï¸`emnist-bymerge.mat`

`emnist-bymerge.mat`ä¸€å…±åŒ…å«

æ ‡ç­¾ä¸ç±»åˆ«çš„å¯¹åº”å…³ç³»ï¼š

è®­ç»ƒé›†ä¸­æ¯ç±»æ ·æœ¬çš„æ•°é‡ä¸ºï¼š34618, 38304, 34307, 35285, 33656, 31280, 34150, 36020, 33924, 33882, 6411, 3874, 12963, 4606, 4925, 9098, 2534, 3097, 14733, 5689, 4998, 20381, 11612, 8237, 27664, 10748, 2603, 5047, 23509, 9766, 15388, 7588, 7403, 5598, 7092, 5416, 10009, 5080, 10152, 24657, 2535, 3693, 8682, 11444, 2966, 14060, 18248ï¼›å…¶ä¸­ï¼Œæ•°å­—å›¾åƒçš„æ ·æœ¬æ€»é‡ä¸ºã€‚ã€‚ã€‚ï¼Œå­—æ¯å›¾åƒçš„æ ·æœ¬æ€»é‡ä¸ºã€‚ã€‚

æµ‹è¯•é›†ä¸­æ¯ç±»æ ·æœ¬çš„æ•°é‡ä¸ºï¼š5745, 6400, 5765, 5827, 5498, 5326, 5787, 5873, 5655, 5651, 1058, 652, 2156, 735, 860, 1524, 430, 576, 2413, 912, 809, 3358, 1984, 1351, 4690, 1812, 415, 835, 3899, 1630, 2528, 1223, 1262, 897, 1195, 925, 1668, 932, 1708, 4066, 426, 583, 1535, 1872, 533, 2365, 2979ï¼›å…¶ä¸­ï¼Œæ•°å­—å›¾åƒçš„æ ·æœ¬æ€»é‡ä¸ºã€‚ã€‚ã€‚ï¼Œå­—æ¯å›¾åƒçš„æ ·æœ¬æ€»é‡ä¸ºã€‚ã€‚

è®­ç»ƒé›†ä¸æµ‹è¯•é›†æ•°é‡ä¹‹æ¯”åˆ†åˆ«ä¸ºï¼š6.0258, 5.9850, 5.9509, 6.0554, 6.1215, 5.8731, 5.9012, 6.1332, 5.9989, 5.9958, 6.0595, 5.9417, 6.0125, 6.2667, 5.7267, 5.9698, 5.8930, 5.3767, 6.1057, 6.2379, 6.1780, 6.0694, 5.8528, 6.0970, 5.8985, 5.9316, 6.2723, 6.0443, 6.0295, 5.9914, 6.0870, 6.2044, 5.8661, 6.2408, 5.9347, 5.8551, 6.0006, 5.4506, 5.9438, 6.0642, 5.9507, 6.3345, 5.6560, 6.1132, 5.5647, 5.9450, 6.1255. 

![image-20230330214158255](https://blogimages-1309804558.cos.ap-nanjing.myqcloud.com/DeLLLaptop/image-20230330214158255.png)

è®­ç»ƒé›†ä¸æµ‹è¯•é›†æ··åˆåï¼Œæ¯ç±»æ ·æœ¬çš„æ•°é‡ä¸ºï¼š40363, 44704, 40072, 41112, 39154, 36606, 39937, 41893, 39579, 39533, 7469, 4526, 15119, 5341, 5785, 10622, 2964, 3673, 17146, 6601, 5807, 23739, 13596, 9588, 32354, 12560, 3018, 5882, 27408, 11396, 17916, 8811, 8665, 6495, 8287, 6341, 11677, 6012, 11860, 28723, 2961, 4276, 10217, 13316, 3499, 16425, 21227ï¼›å…¶ä¸­ï¼Œæ•°å­—å›¾åƒçš„æ ·æœ¬æ€»é‡ä¸ºã€‚ã€‚ã€‚ï¼Œå­—æ¯å›¾åƒçš„æ ·æœ¬æ€»é‡ä¸ºã€‚ã€‚

![image-20230331223200597](https://blogimages-1309804558.cos.ap-nanjing.myqcloud.com/imgpersonal/image-20230331223200597.png)

åŒæ ·æœ‰814,255æ¡å›¾åƒæ•°æ®ã€‚

## `emnist-digits.mat`

![image-20230330214507566](https://blogimages-1309804558.cos.ap-nanjing.myqcloud.com/DeLLLaptop/image-20230330214507566.png)

è®­ç»ƒé›†ä¸­æ¯ç±»æ ·æœ¬çš„æ•°é‡ä¸º24,000ï¼Œæµ‹è¯•é›†ä¸­æ¯ç±»æ ·æœ¬çš„æ•°é‡ä¸º4,000ï¼Œè®­ç»ƒé›†ä¸æµ‹è¯•é›†çš„æ¯”ä¾‹ä¸º6ã€‚è®­ç»ƒé›†æ•°æ®ä¸æµ‹è¯•é›†æ•°æ®æ··åˆåï¼Œæ¯ç±»æ ·æœ¬æœ‰28,000æ¡æ•°æ®ï¼Œå…±æœ‰25,2000æ¡æ•°æ®ã€‚

## `emnist-digits.mat`

![image-20230330214648246](https://blogimages-1309804558.cos.ap-nanjing.myqcloud.com/DeLLLaptop/image-20230330214648246.png)

è®­ç»ƒé›†ä¸­æ¯ç±»æ ·æœ¬çš„æ•°é‡éƒ½æ˜¯4,800ï¼Œæµ‹è¯•é›†ä¸­æ¯ç±»æ ·æœ¬çš„æ•°é‡éƒ½æ˜¯800ï¼Œè®­ç»ƒé›†ä¸æµ‹è¯•é›†çš„æ¯”ä¾‹ä¸º6ã€‚è®­ç»ƒé›†æ•°æ®ä¸æµ‹è¯•é›†æ•°æ®æ··åˆåï¼Œæ¯ç±»æ ·æœ¬æœ‰5,600æ¡æ•°æ®ï¼Œå…±æœ‰145,600æ¡æ•°æ®ã€‚

## `emnist-mnist.mat`

![image-20230331223936361](https://blogimages-1309804558.cos.ap-nanjing.myqcloud.com/imgpersonal/image-20230331223936361.png)

è®­ç»ƒé›†ä¸­æ¯ç±»æ ·æœ¬çš„æ•°é‡éƒ½æ˜¯6,000ï¼Œæµ‹è¯•é›†ä¸­æ¯ç±»æ ·æœ¬çš„æ•°é‡éƒ½æ˜¯1,000ï¼Œè®­ç»ƒé›†ä¸æµ‹è¯•é›†çš„æ¯”ä¾‹ä¸º6ã€‚è®­ç»ƒé›†æ•°æ®ä¸æµ‹è¯•é›†æ•°æ®æ··åˆåï¼Œæ¯ç±»æ ·æœ¬æœ‰7,000æ¡æ•°æ®ï¼Œå…±æœ‰70,000æ¡æ•°æ®ã€‚

<br>

**References**

[1] G. Cohen, S. Afshar, J. Tapson and A. van Schaik, "EMNIST: Extending MNIST to handwritten letters," *2017 International Joint Conference on Neural Networks (IJCNN)*, Anchorage, AK, USA, 2017, pp. 2921-2926. https://ieeexplore.ieee.org/abstract/document/7966217.

[2] LeCun, Yann, et al. "Gradient-based learning applied to document recognition." *Proceedings of the IEEE* 86.11 (1998): 2278-2324. [MNIST handwritten digit database, Yann LeCun, Corinna Cortes and Chris Burges](http://yann.lecun.com/exdb/mnist/).

[3] Grother, Patrick J. "Nist special database 19-hand-printed forms and characters database." *Technical Report, National Institute of Standards and Technology* (1995). [https://www.nist.gov/system/files/documents/srd/nistsd19.pdf](https://www.nist.gov/system/files/documents/srd/nistsd19.pdf).

[4] Grother, Patrick, and Kayee Hanaoka. "Nist special database 19 handprinted forms and characters 2nd edition." *National Institute of Standards and Technology, Tech. Rep* 13 (2016). 
